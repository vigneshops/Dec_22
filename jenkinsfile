pipeline {
    agent any

    stages {
        stage('SCM') {
            steps {
                git 'https://github.com/vigneshops/Dec_22.git'
            }
	    
	 }
            stage('Build') {
            steps {
                sh 'mvn clean'
	    	sh 'mvn install'
            }
	    
	}
            stage('Build docker image') {
               when {
                   branch 'master'
                  }
            steps {
               script {
                   app = docker.build("vigneshops/ddepoly-9am")
                   app.inside {
                   sh 'echo $(curl localhost:8080)'   
                 }
	}			
    }
 }
